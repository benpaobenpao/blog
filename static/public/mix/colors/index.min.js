$(function(){function createColor(){colors.sort(function(){return.5-Math.random()}),curNum=parseInt(4*Math.random());var curColor=colors[curNum];tagFont.html('<div style="color: '+curColor.val+'">'+colors[parseInt(Math.random()*clen)].name+"</div>");for(var tmpHtml="",i=0;4>i;i++)tmpHtml+=curNum===i?'<div style="color: 000;">'+colors[i].name+"</div>":'<div style="color: 000;">'+colors[clen-i-1].name+"</div>";fourBtns.html(tmpHtml)}function timeRun(){1===acStatus&&(clearTime=setTimeout(function(){if(totalTime--,0>=totalTime){clearTimeout(clearTime),totalTime=0,acStatus=2,$(".level").hide(),$(".endLevel").show();var url=GURL+"?r=game/index/addcolor",params={score:curScore};$.post(url,params,function(){var txt="";txt=curScore>5?"恭喜你，总成绩"+curScore+"分":"略微有点小小遗憾，总成绩"+curScore+"分",result.html(txt)},"json")}line.css({width:100*(TIMENUM-totalTime)/TIMENUM+"%"}),timeRun()},1e3))}var colors=[{name:"黑",val:"#000"},{name:"红",val:"#f00"},{name:"绿",val:"#0f0"},{name:"蓝",val:"#00f"},{name:"黄",val:"#ff0"},{name:"粉",val:"#f0f"},{name:"紫",val:"#939"},{name:"橙",val:"#f90"}],clen=colors.length,fourBtns=$("#fourBtns"),tagFont=$("#tagFont"),result=$("#result"),curNum=null,curScore=0;$("#startBtn,#reStartBtn").on("click",function(){$(".level").hide(),$(".gameLevel").show(),createColor(),acStatus=1,totalTime=TIMENUM,curScore=0,line.css({width:"0%"}),$(".tscore,.bscore").html(curScore),timeRun()}),createColor(),fourBtns.on("click","div",function(){var $this=$(this);1===acStatus&&(curNum===$this.index()&&(curScore++,$(".tscore,.bscore").html(curScore)),createColor(),console.log(curScore))});var TIMENUM=60,totalTime=TIMENUM,line=$(".line"),clearTime=null,acStatus=0});